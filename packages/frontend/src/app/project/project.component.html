<div class="pt-10 sm:pt-32 flex h-screen overflow-x-scroll">
    <!-- COLONNE SPRINTS -->

    <div
        id="sprintsCol"
        class="bg-grey1 text-white h-full w-1/6 xl:w-1/12 px-5 py-3 overflow-x-hidden"
    >
        <div class="flex flex-col justify-start items-center text-center">
            <button
                class="bg-primary hover:bg-secondary border-2 text-white text-center p-2 rounded-xl h-8 text-xs mb-6"
                title="Show global view"
            >
                Global view
            </button>

            <button
                (click)="addSprint()"
                class="bg-primary hover:bg-secondary border-2 text-white text-center p-2 rounded-xl h-8 text-xs"
                title="Add a sprint"
            >
                Add sprint
            </button>
            <!-- Boucler sur le nombre de sprints  -->
            <div
                class="flex justify-center items-center mt-8"
                *ngFor="let sprint of sprintList"
            >
                <button
                    (click)="changeSprintDisplay(sprint.id)"
                    class="hover:bg-secondary hover:text-white text-primary p-3 rounded-xl m-2 text-xs font-semibold justify-center"
                    [ngClass]="{
                        'bg-secondary text-white': sprint.id == display.id
                    }"
                >
                    {{ sprint.name }}
                </button>
                <!-- Si sprint terminé, icône V coché  -->
                <div
                    *ngIf="sprint.enddate && sprint.enddate < dateToday"
                    class=""
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-5 h-5 text-tpkvalidate"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- KANBAN DASHBOARD -->

    <div id="kanbanDashboard" class="w-11/12 overflow-y-hidden">
        <!-- Header  -->
        <div
            id="kanbanHeader"
            class="flex justify-between h-1/12 py-2 bg-grey1 w-full fixed z-0"
        >
            <!-- boutons edit project, add task et add column -->

            <div class="flex items-center justify-start pl-6">
                <button routerLink="edit-project" title="Edit project">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-8 h-8 text-white bg-primary border-2 border-primary hover:border-secondary hover:text-white hover:bg-secondary font-bold mr-8 rounded"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M6 13.5V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 9.75V10.5"
                        />
                    </svg>
                </button>
                <button
                    class="bg-primary hover:bg-secondary text-white p-2 rounded-xl h-8 text-xs mr-6"
                    title="Add a new task"
                >
                    New task
                </button>
                <button
                    (click)="addnewKanbanStatus()"
                    class="bg-primary hover:bg-secondary text-white p-2 rounded-xl h-8 text-xs mr-8"
                    title="Add a new task"
                >
                    New column
                </button>
                <div
                    class="flex items-center"
                    *ngFor="let userProject of userProjects"
                >
                    <div
                        class="userChipSmall w-7 h-7 md:w-8 md:h-8 rounded-full bg-secondary text-white flex items-center justify-center hover:cursor-pointer"
                    >
                        <!-- condition si photo, sinon span avec premiere lettre username -->
                        <img
                            *ngIf="userProject.user.picture"
                            class="rounded-full hover:cursor-default"
                            [src]="userProject.user.picture"
                            alt="profile picture"
                            title="{{ userProject.user.username }}"
                        />
                        <span
                            *ngIf="!userProject.user.picture"
                            class="text-2xl uppercase font-bold"
                        >
                            {{ userProject.user.username | initialsName }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- PLUS BESOIN, affichage global est passé dans navbar latérale, avec l'affichage des sprints -->

            <!-- header 2/3 -->

            <!-- 
            <div class="flex items-end w-1/3"> -->

            <!-- <button
                    (click)="closeSprintBar()"
                    [ngClass]="{
                        'text-primary': isSprintsOpen,
                        'bg-secondary text-white': !isSprintsOpen
                    }"
                    class="hover:bg-secondary hover:text-white p-3 rounded-xl m-2 text-xl font-bold"
                >
                    Global
                </button>
                <button
                    (click)="openSprintBar()"
                    [ngClass]="{
                        'text-primary': !isSprintsOpen,
                        'bg-secondary text-white': isSprintsOpen
                    }"
                    class="hover:bg-secondary hover:text-white p-3 rounded-xl m-2 text-xl font-bold"
                >
                    Sprints
                </button> -->
            <!-- </div> -->

            <!-- header 3/3 -->

            <!-- Users assignés au project  -->

            <!-- <div class="flex pr-4">
                USERS
            </div> -->
        </div>

        <!-- Kanban columns  -->

        <div id="kanban" class="flex px-12 pb-12 pt-16">
            <!-- boucler sur les kanbanstatus du projet  -->
            <div class="flex">
                <div
                    *ngFor="let kanbanstatus of kanbanList"
                    class="flex flex-col"
                >
                    <app-kanban-status
                        [kanbanstatus]="kanbanstatus"
                        (kanbanDeleted)="onKanbanDeleted(kanbanstatus)"
                    ></app-kanban-status>
                    <!-- tâches du kanbanstatus  -->
                    <div class="tasksContainer w-64 mx-4 mt-2 flex flex-col">
                        <div *ngFor="let task of taskList">
                            <app-task 
                                [task]="task"
                                *ngIf="kanbanstatus.id == task.kanbanstatus.id"
                            ></app-task>
                        </div>
                    </div>
                </div>

                <!-- BOUTON NEW COLUMN  -->

                <div class="w-36 mx-4 mt-6">
                    <button
                        (click)="addnewKanbanStatus()"
                        class="bg-grey1 rounded-md hover:shadow-sm hover:shadow-secondary"
                    >
                        <div
                            class="w-full bg-primary text-white h-6 rounded-t-lg p-2 flex items-center justify-center"
                        >
                            <h3 class="text-center font-bold text-xs">
                                Add column
                            </h3>
                        </div>
                        <div class="h-12 items-center flex justify-center">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-5 h-5 font-extrabold"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M12 4.5v15m7.5-7.5h-15"
                                />
                            </svg>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
