<div
    class="fixed top-0 bg-[radial-gradient(ellipse_at_right,_var(--tw-gradient-stops))] from-blue-400 to-secondary flex justify-between h-16 md:h-24 w-screen z-50"
>
    <div class="w-1/3 flex justify-left ml-2 md:ml-4 mr-4">
        <!-- logo triptyk -->
        <div class="mr-6 flex hover:cursor-pointer" routerLink="">
            <svg
                class="w-12 sm:w-24"
                viewBox="0 0 2481 3508"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xml:space="preserve"
                xmlns:serif="http://www.serif.com/"
                style="
                    fill-rule: evenodd;
                    clip-rule: evenodd;
                    stroke-linejoin: round;
                    stroke-miterlimit: 2;
                "
            >
                <g transform="matrix(1,0,0,1,-7.18829,-193.689)">
                    <g transform="matrix(1,0,0,1,36.2397,78.2193)">
                        <g
                            transform="matrix(1.56044,0,0,1.58436,96.0666,299.356)"
                        >
                            <g>
                                <g
                                    transform="matrix(-1.84297,0.739647,-0.597793,-1.48552,3328.41,4610.8)"
                                >
                                    <path
                                        d="M352.976,2880.03L702.235,2817.75L698.674,2786.84L349.416,2849.12L352.976,2880.03Z"
                                        style="fill: rgb(255, 255, 255)"
                                    />
                                </g>
                                <g
                                    transform="matrix(9.80571e-17,1.60139,-1.60139,9.80571e-17,5333.92,-74.8989)"
                                >
                                    <rect
                                        x="372.73"
                                        y="2820.52"
                                        width="298.544"
                                        height="31.223"
                                        style="fill: rgb(255, 255, 255)"
                                    />
                                </g>
                                <g
                                    transform="matrix(1,0,0,1,-1057.14,-2090.03)"
                                >
                                    <path
                                        d="M2127.27,3029.2L1692.67,2653.06L1692.78,3184.36L1742.78,3184.35L1742.7,2762.48C1843.68,2849.88 2094.55,3067 2094.55,3067L2127.27,3029.2Z"
                                        style="fill: rgb(255, 255, 255)"
                                    />
                                </g>
                                <g
                                    transform="matrix(9.80571e-17,1.60139,-1.60139,9.80571e-17,5066.26,140.477)"
                                >
                                    <rect
                                        x="372.73"
                                        y="2820.52"
                                        width="298.544"
                                        height="31.223"
                                        style="fill: rgb(255, 255, 255)"
                                    />
                                </g>
                            </g>
                        </g>
                        <g
                            transform="matrix(2.08496,0,0,2.08496,-257.242,-1566.33)"
                        >
                            <path
                                d="M1110.36,1964.52L1110.36,1145.42L291.259,1145.42L291.259,1964.52L1110.36,1964.52ZM1068.32,1187.46L1068.32,1922.48L333.3,1922.48L333.3,1187.46L1068.32,1187.46Z"
                                style="fill: rgb(255, 255, 255)"
                            />
                        </g>
                    </g>
                    <g
                        transform="matrix(1.39844,0,0,1.39844,-245.996,-1230.17)"
                    >
                        <g>
                            <g transform="matrix(1,0,0,1,452.842,3021.49)">
                                <path
                                    d="M148.177,-166.06L148.177,-213.004L2.235,-213.004L2.235,-166.06L47.583,-166.06L47.583,0L102.83,0L102.83,-166.06L148.177,-166.06Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                                <path
                                    d="M172.767,-213.004L172.767,0L228.014,0L228.014,-81.753L281.025,0L349.685,0L282.941,-87.182C292.841,-89.098 304.018,-93.888 312.321,-101.872C322.86,-112.091 329.247,-128.058 329.247,-146.261C329.247,-163.186 323.179,-181.708 311.044,-194.163C295.396,-210.45 274.958,-213.004 258.99,-213.004L172.767,-213.004ZM228.014,-170.212L238.552,-170.212C250.687,-170.212 259.948,-167.018 265.058,-161.909C269.848,-157.438 272.403,-150.412 272.403,-144.025C272.403,-137.319 269.529,-130.294 265.377,-126.142C258.671,-119.755 246.855,-117.52 238.552,-117.52L228.014,-117.52L228.014,-170.212Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                                <rect
                                    x="372.997"
                                    y="-213.004"
                                    width="55.247"
                                    height="213.004"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                                <path
                                    d="M563.009,-70.576C579.615,-70.576 599.414,-72.811 616.02,-89.098C632.626,-105.385 634.862,-125.184 634.862,-142.109C634.862,-159.993 631.668,-177.876 615.062,-193.844C598.776,-209.492 579.615,-213.004 561.093,-213.004L472.953,-213.004L472.953,0L528.2,0L528.2,-70.576L563.009,-70.576ZM528.2,-168.296L547.041,-168.296C554.067,-168.296 564.286,-167.338 570.673,-160.632C576.421,-154.883 577.06,-147.219 577.06,-141.471C577.06,-136.361 576.741,-127.739 570.034,-121.991C563.328,-115.923 552.47,-115.284 546.722,-115.284L528.2,-115.284L528.2,-168.296Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                            </g>
                            <g transform="matrix(1,0,0,1,1099.52,3021.49)">
                                <path
                                    d="M148.177,-166.06L148.177,-213.004L2.235,-213.004L2.235,-166.06L47.583,-166.06L47.583,0L102.83,0L102.83,-166.06L148.177,-166.06Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                                <path
                                    d="M231.527,0L287.093,0L287.093,-102.191L366.61,-213.004L299.547,-213.004L260.906,-154.883L220.669,-213.004L154.564,-213.004L231.527,-102.191L231.527,0Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                                <path
                                    d="M440.38,-213.004L385.132,-213.004L385.132,0L440.38,0L440.38,-92.291L512.552,0L584.086,0L491.794,-112.091L576.421,-213.004L508.081,-213.004L440.38,-125.184L440.38,-213.004Z"
                                    style="
                                        fill: rgb(255, 255, 255);
                                        fill-rule: nonzero;
                                    "
                                />
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        <!-- select avec projets de l'utilisateur, venir boucler sur ses projets pour les afficher dedans -->
        <div
            *ngIf="loggedIn()"
            class="hidden sm:flex items-center justify-center sm:mr-2 sm:ml-16"
        >
            <select
                name="projects"
                id="selectMyProjects"
                class="w-30 h-6 md:w-36 md:h-8 lg:w-40 lg:h-8 text-secondary text-xs md:text-sm lg:text-lg bg-tpkwhite p-1 font-semibold rounded-md focus:ring-2 focus:ring-secondary"
                (change)="onChange($event)"
            >
                <option selected disabled hidden>
                    {{ 'infrascrum.header.option-project' | translate }}
                </option>
                <option
                    class="hover:cursor-pointer"
                    *ngFor="
                        let userProject of userProjects;
                        index as i;
                        first as isFirst
                    "
                    [value]="userProject['project']['id']"
                >
                    {{ userProject['project']['name'] }}
                </option>
            </select>
        </div>
    </div>

    <!-- titre page actuelle -->
    <div class="hidden lg:flex items-center w-1/3 justify-center">
        <h1 class="text-white sm:text-2xl lg:text-4xl xl:text-5xl font-bold">
            {{ title }}
        </h1>
    </div>

    <!-- boutons signup et login ou menu user et searchbar si connecté -->
    <div class="flex items-center text-white mr-6 md:mr-8 w-1/3 justify-end">
        <!-- signup et login -->
        <div
            *ngIf="!loggedIn()"
            class="text-sm sm:text-lg md:text-xl flex items-center ml-1"
        >
            <!-- Plus besoin du signup pour l'instant  -->

            <!-- <a
                routerLink="create-user"
                class="mr-3 group transition duration-300 pt-1"
                >Sign Up
                <span
                    class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-secondary"
                ></span>
            </a> -->

            <button
                type="button"
                routerLink="login"
                (click)="onLoginClick()"
                class="rounded-md md:rounded-xl p-1 md:px-3 md:py-2 overflow-hidden relative group cursor-pointer border-2 font-medium border-tpkwhite group-hover:border-secondary text-white"
            >
                <span
                    class="absolute w-64 h-0 transition-all duration-300 origin-center rotate-45 -translate-x-20 bg-secondary bg-opacity-80 top-1/2 group-hover:h-64 group-hover:-translate-y-32 ease"
                ></span>
                <span
                    class="relative text-white transition duration-300 group-hover:text-white ease"
                    >Login</span
                >
            </button>
        </div>
        <!-- input search -->
        <div
            *ngIf="loggedIn()"
            class="hidden sm:flex items-center justify-start mr-6 sm:mr-24"
        >
            <input
                type="text"
                [placeholder]="'infrascrum.header.search' | translate"
                class="w-32 h-6 md:w-36 md:h-7 lg:w-40 lg:h-8 text-secondary text-xs md:text-sm lg:text-lg bg-tpkwhite p-2 font-semibold rounded-md placeholder-primary focus-visible:outline-none focus-visible:ring-secondary focus-visible:ring-2"
                list="userprojects"
                (input)="onChange($event)"
            />
            <datalist id="userprojects">
                <option
                    *ngFor="
                        let userProject of userProjects;
                        index as i;
                        first as isFirst
                    "
                    [value]="userProject['project']['id']"
                >
                    {{ userProject['project']['name'] }}
                </option>
            </datalist>
        </div>
        <!-- Pastille user si login -->
        <div
            *ngIf="loggedIn()"
            (click)="toggleMenu()"
            class="rounded-full hover:cursor-pointer"
        >
            <div
                class="userChip relative w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full bg-secondary flex items-center justify-center border-2 hover:border-tpkvalidate hoverSmooth"
                [ngClass]="isMenuOpen ? 'border-tpkvalidate' : ''"
            >
                <!-- condition si photo, sinon span avec premiere lettre username -->
                <img
                    *ngIf="user.picture"
                    class="img rounded-full"
                    src="data:image/*;base64, {{ user.picture }}"
                    alt="{{ user.picture }}"
                />
                <span
                    *ngIf="!user.picture"
                    class="text-sm sm:text-xl md:text-2xl uppercase font-bold"
                    >{{ user.username | initialsName }}</span
                >
            </div>
            <!-- Sous-menu user -->
            <div
                *ngIf="isMenuOpen"
                (outsideClick)="isMenuOpen = false"
                class="sub-menu-wrapper dropdownAnim absolute top-auto right-3 md:right-6 w-64 max-h-0 drop-shadow-lg z-50"
            >
                <div
                    class="sub-menu bg-secondary rounded-b-lg rounded-tl-lg p-5 m-3"
                >
                    <div
                        class="user-info flex items-center justify-center text-center cursor-default"
                    >
                        <div class="w-1/3">
                            <div
                                class="userChip w-12 h-12 mr-10 rounded-full bg-primary flex items-center justify-center"
                            >
                                <!-- condition si photo, sinon span avec première lettre  -->

                                <span class="text-2xl uppercase font-bold">{{
                                    user.username | initialsName
                                }}</span>
                            </div>
                        </div>
                        <div class="w-2/3">
                            <h3 class="text-lg text-white font-bold">
                                {{ user.username }}
                            </h3>
                        </div>
                    </div>
                    <hr class="border-none h-0.5 w-full bg-white mt-2 mb-2" />

                    <!-- Lien vers projets de l'utilisateur  -->
                    <a
                        routerLink="/projects"
                        class="group transition-all duration-300 ease-in-out sub-menu-link flex items-center justify-between text-white mt-4 mb-2 p-2 hover:bg-primary hover:text-white rounded-md"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-8 h-8 mr-2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z"
                            />
                        </svg>

                        <p class="w-full">
                            {{
                                'infrascrum.header.sub-menu-projects'
                                    | translate
                            }}
                        </p>
                        <span
                            class="relative transition-transform group-hover:left-1"
                            >></span
                        >
                    </a>

                    <!-- Lien profil / venir ajouter lien vers profil user au lieu de index -->
                    <a
                        routerLink="/user-profile"
                        class="group sub-menu-link flex items-center justify-between text-white my-2 p-2 hover:bg-primary hover:text-white rounded-md"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-8 h-8 mr-2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
                            />
                        </svg>
                        <p class="w-full">
                            {{
                                'infrascrum.header.sub-menu-profil' | translate
                            }}
                        </p>
                        <span
                            class="relative transition-transform group-hover:left-1"
                            >></span
                        >
                    </a>

                    <!-- Lien management users uniquement visible pour superadmin  -->
                    <a
                        *ngIf="isSuperadmin()"
                        routerLink="/admin"
                        class="group sub-menu-link flex items-center justify-between text-white my-2 p-2 hover:bg-primary hover:text-white rounded-md"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-8 h-8 mr-2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"
                            />
                        </svg>

                        <p class="w-full">
                            {{ 'infrascrum.header.sub-menu-users' | translate }}
                        </p>
                        <span
                            class="relative transition-transform group-hover:left-1"
                            >></span
                        >
                    </a>
                    <a
                        (click)="changeLanguage()"
                        class="group sub-menu-link flex text-white my-2 p-2 items-center hover:bg-primary hover:text-white rounded-md"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-8 h-8 mr-2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802"
                            />
                        </svg>

                        <p class="w-full">
                            <button translate>
                                {{
                                    'infrascrum.header.sub-menu-language'
                                        | translate
                                }}
                            </button>
                        </p>
                        <span
                            class="relative transition-transform group-hover:left-1"
                            >></span
                        >
                    </a>
                    <!-- Lien déconnexion -->
                    <a
                        routerLink="/index"
                        (click)="logOut()"
                        class="group sub-menu-link flex text-white mt-2 p-2 items-center hover:bg-tpkerror hover:text-white rounded-md"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-8 h-8 mr-2"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"
                            />
                        </svg>

                        <p class="w-full">
                            {{
                                'infrascrum.header.sub-menu-logout' | translate
                            }}
                        </p>
                        <span
                            class="relative transition-transform group-hover:right-1"
                            ><</span
                        >
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
